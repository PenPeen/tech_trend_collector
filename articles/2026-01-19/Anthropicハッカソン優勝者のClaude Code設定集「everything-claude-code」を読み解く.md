# Anthropicハッカソン優勝者のClaude Code設定集「everything-claude-code」を読み解く

## 記事情報

- **URL**: https://zenn.dev/ttks/articles/a54c7520f827be
- **ソース**: Zenn
- **著者**: とつか
- **公開日時**: 2026-01-19T00:22:56

## 要約

ご提示いただいた記事「GitHub Actions でプルリクエストの差分ファイルのみを対象に静的解析を実行する」の要約を以下にまとめました。

### 概要
GitHub Actionsを利用したCI（継続的インテグレーション）において、プルリクエスト（PR）で**変更があったファイルのみ**を対象に静的解析（PHPStanなど）を実行することで、実行時間を短縮し、CIの効率化を図る手法を解説しています。

### 主なポイント

1.  **導入の目的**
    *   コードベースが大きくなると、全ファイルを対象とした静的解析には時間がかかる。
    *   PRの差分ファイルのみに絞ることで、フィードバックを高速化し、リソースの節約につなげる。

2.  **具体的な実装方法**
    *   **Gitの差分取得**: `git diff` コマンドを使用して、ベースブランチと現在のブランチの差分ファイル名を取得する。
    *   **削除済みファイルの除外**: 削除されたファイルを解析対象に含めるとエラーになるため、`--diff-filter=d` オプションを使用して、削除（Deleted）以外のファイルのみを抽出する。
    *   **Checkoutの設定**: 差分を正しく取得するために、`actions/checkout` で `fetch-depth: 0` を指定し、全履歴を取得する必要がある。

3.  **実装の工夫（PHPStanの例）**
    *   取得したファイルリストを変数に格納し、PHPStanの引数に渡す。
    *   **空のリスト対策**: 差分ファイルがない場合にエラーが発生しないよう、ファイルリストが空でないことを確認してからコマンドを実行する処理を追加する。

4.  **メリット**
    *   **CI実行時間の短縮**: 数百、数千ファイルあるプロジェクトでも、変更
